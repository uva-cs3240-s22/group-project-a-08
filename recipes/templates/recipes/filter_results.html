<!DOCTYPE html>
<html lang="en">

    <head>
        <!-- {# Load the tag library #} -->
        {% load bootstrap5 %}
        
        <!-- {# Load CSS and JavaScript #} -->
        {% bootstrap_css %}
        {% bootstrap_javascript %}
        
        <!-- {# Display django.contrib.messages as Bootstrap alerts #} -->
        <!-- {% bootstrap_messages %} -->
    
        {% load static %}
        <script src="https://kit.fontawesome.com/f79546f450.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="{% static 'Google.css' %}" />
        <title>Results</title>
    </head>

    <body style="background-color:#ddd3f0;">

      <!-- NAVBAR -->
        <nav class="navbar sticky-top navbar-expand-lg navbar-dark" style="background-color: #381e67;">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">Word of Mouth</a>
              <button   class="navbar-toggler"
                        type="button"
                        data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link" href="{% url 'home' %}">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="{% url 'recipes:create_recipe' %}">Upload</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="{% url 'recipes:all_recipes' %}">Recipes</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="{% url 'recipes:saved_recipes' %}">Favorites</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">Profile</a>
                  </li>
                </ul>
                <a class="nav-link link-light" href="{% url 'logout' %}">
                  <i class="fa-solid fa-right-from-bracket"></i>
                  Logout
                </a>
              </div>
            </div>
          </nav>

          <!-- SEARCH BAR -->
          <div class="mx-3">
            <h1 class="mt-3 text-center">Browse Recipes</h1>
            <form action="{% url 'recipes:search' %}" class="mt-2 mb-3">
              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <button class="btn btn-secondary" type="submit">Search</button>
                </div>
                <input type="text" name="recipeTitle" class="form-control" id="search" placeholder="Search recipes..." style="width:80%; margin: auto" />
              </div>
            </form>

            <!-- ACCORDION -->
            <div class="row">
                <div class="col-2">
                  <h5>Categories</h5>
                  <form action="{% url 'recipes:filter' %}" method="get">
                  <div class="accordion accordion-flush" id="accordionFlushExample" style="background-color:#ddd3f0;">

                    <!-- BREAKFAST, LUNCH, DINNER FILTER -->
                    <div class="accordion-item" style="background-color:#ddd3f0;">
                      <h2 class="accordion-header" id="flush-headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne" style="background-color:#ddd3f0;">
                          Meal Type
                        </button>
                      </h2>
                      <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="br" id="br" name="mealType">
                              <label class="form-check-label" for="flexCheckDefault">
                                Breakfast
                              </label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="lu" id="lu" name="mealType">
                              <label class="form-check-label" for="flexCheckChecked">
                                Lunch
                              </label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="di" id="di" name="mealType">
                              <label class="form-check-label" for="flexCheckChecked">
                                Dinner
                              </label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="sn" id="sn" name="mealType">
                              <label class="form-check-label" for="flexCheckChecked">
                                Snack
                              </label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="ot" id="ot" name="mealType">
                              <label class="form-check-label" for="flexCheckChecked">
                                Other
                              </label>
                            </div>
                            
                          
                        </div>
                      </div>
                    </div>

                    <!-- DIETARY RESTRICTION FILTER -->
                    <div class="accordion-item" style="background-color:#ddd3f0;">
                      <h2 class="accordion-header" id="flush-headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo" style="background-color:#ddd3f0;">
                          Dietary Restriction
                        </button>
                      </h2>
                      <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                          
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="ve" id="ve" name="mealType">
                              <label class="form-check-label" for="flexCheckDefault">
                                Vegetarian
                              </label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="vg" id="vg" name="mealType">
                              <label class="form-check-label" for="flexCheckChecked">
                                Vegan
                              </label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="gf" id="gf" name="mealType">
                              <label class="form-check-label" for="flexCheckChecked">
                                Gluten-Free
                              </label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="nr" id="nr" name="mealType">
                              <label class="form-check-label" for="flexCheckChecked">
                                No Restriction
                              </label>
                            </div>
                            
                          
                        </div>
                      </div>
                    </div>
                  </div>
                  <button class="btn btn-secondary" type="submit">Filter</button>
                </form>
                </div>
  

            <!-- FILTER RESULTS -->
            {% if results %}
            <div class="d-flex justify-content-center col-10" style="padding-left: 0px;">
                <div class="d-flex flex-row bd-highlight mb-3 w-100">
                    {% for recipe in results %}
                        <div class="d-flex justify-content-evenly col-3" style="padding-left: 10px; padding-right: 10px;">
                          <div class="card" style="background-color:#e5dff1;">
                            <img src="{{ recipe.upload.url }}" class="card-img-top" alt="..." />
                            <!--img src="https://media.istockphoto.com/vectors/thumbnail-image-vector-graphic-vector-id1147544807?k=20&m=1147544807&s=612x612&w=0&h=pBhz1dkwsCMq37Udtp9sfxbjaMl27JUapoyYpQm0anc=" class="card-img-top" alt="..."-->
                            <div class="card-body">
                              <h5 class="card-title"><a href="{% url 'recipes:detail' recipe.id %}" class="stretched-link link-dark" style="text-decoration: none;">{{ recipe.title|capfirst }}</a></h5>
                              <p class="card-text">
                                PrepTime: {{ recipe.prep_time }} mins<br>
                                CookTime: {{ recipe.cook_time }} mins<br>
                                Servings: {{ recipe.servings }} <br>
                                
                                {% if recipe.diet_restriction == 'VG' %}
                                <span class="badge rounded-pill bg-success">VEGAN</span>
                                {% endif %}
                                {% if recipe.diet_restriction == 'VE' %}
                                <span class="badge rounded-pill bg-warning">VEGETARIAN</span>
                                {% endif %}
                                {% if recipe.diet_restriction == 'GF' %}
                                <span class="badge rounded-pill bg-info">GLUTEN-FREE</span>
                                {% endif %}
                              </p>
                            </div>
                          </div>
                        </div>
                        {% if forloop.counter|divisibleby:4 %}
                </div>
            </div>
            <div class="d-flex justify-content-left col-12" style="padding-left: 16.75%">
                    <div class="d-flex flex-row bd-highlight mb-3 col-12">
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% else %}
                <p>No recipes are available.</p>
            {% endif %}

            <!--div class="row">
              <div class="col-12">
                <div>
                {% if results %}
                    {% for recipe in results %}
                      <div class="card col-3">  
                        <img src="https://media.istockphoto.com/vectors/thumbnail-image-vector-graphic-vector-id1147544807?k=20&m=1147544807&s=612x612&w=0&h=pBhz1dkwsCMq37Udtp9sfxbjaMl27JUapoyYpQm0anc=" class="card-img-top" alt="...">
                        <div class="card-body">
                          <h5 class="card-title">{{ recipe.title }}</h5>
                          <p class="card-text">
                            PrepTime: {{ recipe.prep_time }} <br>
                            CookTime: {{ recipe.cook_time }} <br>
                            Servings: {{ recipe.servings }} <br>
                          </p>
                        </div>
                      </div>
                    {% endfor %}
                {% else %}
                    <p>No recipes are available.</p>
                {% endif %}
                </div>
              </div>
            </div-->


          </div>
    </body>

</html>